<!doctype html>
<html>
	<head>
		<title>배출가스장치정비·검사</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, target-densitydpi=medium-dpi" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />

		<script type="text/javascript" src="http://www.e-koreatech.ac.kr/res/lia/lia.all.js?V=11" charset="utf-8"></script>
		<script type="text/javascript" src="js/getContentId.js" charset="utf-8"></script>

		<link rel="stylesheet" type="text/css" href="css/font.css" />
		<script type="text/javascript" src="js/webfont.js"></script>
		<script type="text/javascript">
			var currentPage = 15;											// 현 페이지 번호
			WebFont.load({
				custom: {
					families: ['nbgM', 'play']
				}
			});
		</script>
		<link rel="stylesheet" type="text/css" href="css/default.css" />

		<script type="text/javascript" src="js/globalvars.js"></script>
		<script type="text/javascript" src="js/jquery-latest.js"></script>
		<script type="text/javascript" src="js/common.js"></script>
		<script type="text/javascript" src="js/common-script.js"></script>
		<script type="text/javascript" src='js/jquery-2.1.1.min.js'></script>
		<script type="text/javascript" src="js/jquery-ui.min.js"></script>
		<script type="text/javascript" src='js/jquery.ui.touch-punch.js'></script>

		<script type="text/javascript">
			$(document).ready(function(){
				$("#sco-name1").text(currentSco1);					// 대주제

				lms_mode();													// LMS 탑재관련
				menuInit();														// 우측 메뉴
				
				var contentId = getContentId();
				function resizeHeight(){
					window.parent.postMessage( contentId + '_' + wrapper.scrollHeight, '*');
				}
				addEventListener('resize', resizeHeight, false);
				window.parent.postMessage( contentId + '_' + wrapper.scrollHeight, '*');
			});
		</script>
	</head>





	<body onload="init();">
		<div id="wrapper" class="body-learning">

			<header class="learn">
				<h1 id="course" tabindex="1"></h1>
				<h2 id="chap-1" tabindex="2"></h2>
			</header><!--  과정명, 차시명 영역  -->





			<section id="apply">
				<nav>
					<script type="text/javascript" src="js/menu.js"></script>
					<div id="menu_open" tabindex="3">INDEX 열기</div>
					<div id="menu"></div>
					<div id="menu-bg"></div>
				</nav><!--  INDEX 메뉴 영역  -->
				<p id="sco-name1" class="theme"></p><!--  대주제 영역  -->



				<div id="apply-area">
					<ul class="apply-text">
						<li class="type-1">지금까지 학습한 내용을 적용해 봅시다.</li>
						<li class="type-2"><span>PCV 제어장치 구성도의 명칭을 보기에서 찾아 옮겨보세요.</span> 옮긴 후 정답확인 버튼을 선택하여 음성강의를 확인해보세요.</li>
					</ul>


					<ul id="drag-drop">
						<li class="drag-zone">
							<h4>보기</h4>

							<div class="drag button" id="item-01"><span id="item-img-01">서지탱크</span></div>
							<div class="drag button" id="item-02"><span id="item-img-02">PCV 밸브</span></div>
							<div class="drag button" id="item-03"><span id="item-img-03">브리더 호스</span></div>
							<div class="drag button" id="item-04"><span id="item-img-04">흡입호스</span></div>
							<!-- DRAG 영역 끝 -->

							<div class="btn" id="check-solution" style="display:none;"><a href="javascript:checkAnswer();">확인</a></div>
							<div class="btn" id="show-solution-1" style="display:none;"><a href="javascript:showAnswer1();">정답확인</a></div>
							<div class="btn" id="show-solution-2" style="display:none;"><a href="javascript:showAnswer2();">정답확인</a></div>
							<!-- 버튼 영역 끝 -->
						</li>


						<li class="drop-zone">
							<p>저부하 운전시, 고부하 운전시, 흡입공기</p>

							<div class="check" id="check-01"></div>
							<div class="check" id="check-02"></div>
							<div class="check" id="check-03"></div>
							<div class="check" id="check-04"></div>
							<!-- 정오답 체크 영역 끝 -->

							<div class="drop" id="item-11"><span id="item-img-11"></span></div>
							<div class="drop" id="item-12"><span id="item-img-12"></span></div>
							<div class="drop" id="item-13"><span id="item-img-13"></span></div>
							<div class="drop" id="item-14"><span id="item-img-14"></span></div>
							<!-- DROP 영역 끝 -->
						</li>
					</ul>



					<div class="apply-sound">
						<audio controls style="display:none;">
							<script type="text/javascript">
								document.write("<source src='"+mp3Link+"02_15.mp3' type='audio/mpeg' />");
							</script>
							해당 브라우저는 음성을 지원하지 않습니다.
						</audio>

						<a href="javascript:viewNarration();" style="display:none;">해설보기</a>
					</div>



					<dl id="narration-area">
						<dt>해설보기</dt>
						<dd>크랭크케이스 배출가스 제어에 대하여 설명할 수 있다. 연료탱크 증발가스제어 시스템에 대하여 설명할 수 있다. 연료탱크 증발가스제어 시스템에 대하여 설명할 수 있다. CVVT 시스템에 대하여 설명할 수 있다.</dd>
						<dd class="btn"><a href="javascript:narrationClose();">해설닫기</a></dd>
					</dl>
					<div class="narration-bg"></div>



					<audio id="audio1">
						<script type="text/javascript">
							document.write("<source src='"+mp3Link+"o.mp3' type='audio/mpeg' />");
						</script>
					</audio>
					<audio id="audio2">
						<script type="text/javascript">
							document.write("<source src='"+mp3Link+"x.mp3' type='audio/mpeg' />");
						</script>
					</audio><!--  정오답 사운드 영역  -->
				</div>



				<div class="page-ending">※ 학습을 완료한 후 다음페이지로 이동하세요.</div>
				<div id="apply_alert" style="display:none;"><img src="img/quiz/pop_alert_02.png" alt="다시 한번 생각해 보세요." /></div>



				<script type="text/javascript">
					var drags = new Array();
					var ansOk = new Array();
					var btnCnt = 0;

					var kv = {'item-01':'','item-02':'','item-03':'','item-04':'aaa'};

					function init (){
						$(".drag.button").draggable({
						containment : "#drag-drop", 
						revert : "invalid", // 지정한 DROP영역의 밖에 DROP 했을 때 원래 위치로 돌아가게 하는 속성
						start: function(event,ui) {
								$(this).draggable( "option", "revert", true );
								$(this).addClass('ing')
							}
						});

						$(".drag.button").draggable({
						stop: function(event,ui) {
								$(this).removeClass('ing')
							}
						});


						$(".drop").droppable({
							drop: function(event,ui) {

								ui.draggable.draggable( "option", "revert", false );

								var dragid = ui.draggable.attr("id");		// drag 레이어 ID 구하기
								var dropid = $(this).attr("id");				// drop 레이어 ID 구하기

								kv[dragid] = dropid;


								$(".drop").droppable({disabled:false}); // 모든 레이어에 drop 가능하도록 세팅

								for (i=1;i<=4;i++)
								{
									if(kv['item-0'+i])
									{
										$( "#"+kv['item-0'+i] ).droppable({ disabled:true }); // drop된 레이어에 더 이상 drop안되게 만들기
									}
								}

								if (dragid == "item-01") { drags[0] = 'ok'; $('#item-01').removeClass('ing'); $('#item-img-01').addClass('drop-img'); if (dropid == "item-11") { ansOk[0] = 'ok'; } else { ansOk[0] = ''; } }
								if (dragid == "item-02") { drags[1] = 'ok'; $('#item-02').removeClass('ing'); $('#item-img-02').addClass('drop-img'); if (dropid == "item-12") { ansOk[1] = 'ok'; } else { ansOk[1] = ''; } }
								if (dragid == "item-03") { drags[2] = 'ok'; $('#item-03').removeClass('ing'); $('#item-img-03').addClass('drop-img'); if (dropid == "item-13") { ansOk[2] = 'ok'; } else { ansOk[2] = ''; } }
								if (dragid == "item-04") { drags[3] = 'ok'; $('#item-04').removeClass('ing'); $('#item-img-04').addClass('drop-img'); if (dropid == "item-14") { ansOk[3] = 'ok'; } else { ansOk[3] = ''; } }


								// item-11에 대한 정답 OX 체크
								if(drags[0] == "ok" && ansOk[0] == "ok"){
									$("#check-01").removeClass();
									$("#check-01").addClass('check-o');
								} else {
									$("#check-01").removeClass();
									$("#check-01").addClass('check-x');
								}
								
								// item-12에 대한 정답 OX 체크
								if(drags[1] == "ok" && ansOk[1] == "ok"){
									$("#check-02").removeClass();
									$("#check-02").addClass('check-o');
								} else {
									$("#check-02").removeClass();
									$("#check-02").addClass('check-x');
								}
								
								// item-13에 대한 정답 OX 체크
								if(drags[2] == "ok" && ansOk[2] == "ok"){
									$("#check-03").removeClass();
									$("#check-03").addClass('check-o');
								} else {
									$("#check-03").removeClass();
									$("#check-03").addClass('check-x');
								}
								
								// item-14에 대한 정답 OX 체크
								if(drags[3] == "ok" && ansOk[3] == "ok"){
									$("#check-04").removeClass();
									$("#check-04").addClass('check-o');
								} else {
									$("#check-04").removeClass();
									$("#check-04").addClass('check-x');
								}


								var droppableOffset = $(this).offset();
								var x = droppableOffset.left;
								var y = droppableOffset.top;
								ui.draggable.offset({ top: y, left: x });

								if (drags[0] == 'ok' && drags[1] == 'ok' && drags[2] == 'ok' && drags[3] == 'ok'){
									$(".drag").draggable({disabled: true}); // 정답 레이어 drag 안되게 세팅
									$(".drag").removeClass("button");
									$('#check-solution').show();
								}

								if (btnCnt == 1 && drags[0] == 'ok' && drags[1] == 'ok' && drags[2] == 'ok' && drags[3] == 'ok'){
									$('#check-solution').hide();
									$('#show-solution-1').show();
								}

								if (ansOk[0] == 'ok' && ansOk[1] == 'ok' && ansOk[2] == 'ok' && ansOk[3] == 'ok'){
									$('#check-solution').hide();
									$('#show-solution-2').show();
								}
							}
						});

					}

					var cnt = 0;
					var x = 0;
					function checkAnswer (){
						for (var i=0; i<4; i++){
							j = i + 1;
							if (ansOk[i] != 'ok'){
								if (cnt < 1){
									$("#item-0"+j).remove();
									$("#drag-drop > .drag-zone").append("<div class='drag button' id='item-0"+j+"'><span id='item-img-0"+j+"'></span></div>");
									x++;

									drags[i] = '';
									btnCnt = 1;
								}
							}
						}

						if (ansOk[0] == 'ok' && ansOk[1] == 'ok' && ansOk[2] == 'ok' && ansOk[3] == 'ok'){
							$("#show-solution-2").fadeIn(2000);
						}

						else if (x > 0 || cnt == 0){
							document.getElementById("audio2").play();
							$("#apply_alert").fadeIn(1500).fadeOut(1500);
							$("#check-solution").hide();
							x = 0;

							//drop 해제된 레이어에 다시 drop 가능하도록 하는 구문
							for (i=11; i<=14; i++)
							{
								ii = i - 10;
								if (ansOk[i-11] != 'ok')
								{
									$("#item-"+i).droppable( "enable" );
									kv['item-0'+ii] = ''; // 정답확인 후 다시 drop 가능하게 된 레이어를 위한 배열 초기화를 위해
								}
							}
						}

						else if (x > 0 || cnt == 1){
							document.getElementById("audio2").play();
							$("#apply_alert").fadeIn(1000).fadeOut(1000);
							$("#check-solution").hide();
							$("#show-solution-1").fadeIn(2000);
							$("#apply-answer").fadeIn(2000);
							x = 0;
						}

						cnt++;
						init();
					}

					function showAnswer1 (){
						document.getElementById("audio2").play();
						changeAnswer();
						$(".apply-sound audio").fadeIn(500);
						$(".apply-sound a").fadeIn(500);
						$("#show-solution-1").hide();
					}

					function showAnswer2 (){
						document.getElementById("audio1").play();
						changeAnswer();
						$(".apply-sound audio").fadeIn(500);
						$(".apply-sound a").fadeIn(500);
						$("#show-solution-2").hide();
					}

					function viewNarration (){
						$(".narration-bg").show();
						$("#narration-area").show();
						$("#narration-area").addClass("open");
					}

					function narrationClose (){
						$(".narration-bg").hide();
						$("#narration-area").hide();
						$("#narration-area").removeClass("open");
					}

					function changeAnswer(){
						for( var i = 0; i < ansOk.length; i++ ){
							if(ansOk[i] != 'ok'){
								$("#item-img-0"+(i+1)).addClass("fail-img"); 
							} 
							$("#check-0"+(i+1)).css('display','block');
						}
					}
				</script>
			</section><!--  본문 영역 -->



			<footer>
				<script type="text/javascript" src="js/footer.js"></script>
			</footer><!--  하단 영역 -->
		</div>
	</body>
</html>
