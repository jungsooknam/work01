<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="e-smart-hittest-jquery.min.js"></script>
</head>
<style>


    .aaa{
        position: absolute;
        width:690px;
        height: 430px;
        /*background-image: url("sample01.png");*/
        background-color: #0A974F;
        /*animation-duration: 3s;*/
        /*animation-name: infocus;*/
        animation: myfirst 10s ;
    }

    .bbb{
        position: absolute;
        width:590px;
        height: 330px;
        background-image: url("sample01.png");
        /*background-color: #0A974F;*/
        /*animation-duration: 3s;*/
        /*animation-name: infocus;*/
        animation: myfirst 5s ;
    }

    .ccc {
        position: relative;
        top: 400px;
        width: 500px;
        background-color: #2C81BC;
        overflow: hidden;
        height: 100px;
        text-align: right;
    }
    .ddd{
        position: absolute;

        width: 500px;
        background-color: #2C81BC;
        overflow: hidden;
        height: 100px;
        text-align: right;
    }

    p {
        /*width:100%;*/
        /*!*position: absolute;*!*/
        /*animation-duration: 3s;*/
        /*animation-name: slidein;*/

        color:#fff;
        /*font:50px nsM;*/
        background-color: #3b4d70;
        float: right;
        /*margin-right: 0;*/
        /*left:0;*/
        /*right:0;*/
        /*border-radius: 20px 0px 0px 20px;*/
        /*margin-left: 50%;*/
        padding: 1% 2% 1% 3%;

        /*display:block;*/
        margin-right: 0%;
        /*width:100%;*/
        /*width: 100px;*/


    }

    div{
        border: 1px solid red;
    }

    #aaaaaaaa{
        width: 150px; height: 150px; padding: 0.5em;
        cursor:pointer;
    }


</style>

<body>
<div class="aaa"> 요거... 메롱.</div>


<div class="bbb" id="t1"> 가나다라.. 마바사...</div>


<div class="ccc" id="t2"> 요거... 메롱.</div>



<div class="ddd" id="aaaaaaaa">
<p>The Caterpillar and Alice looked at each ot</p>
</div>

<div class="cddd" id="bbbbbbb">
    <p>The Caterpillar and Alice looked at each ot</p>
</div>


<script>

    var TestDrag = function (target, answers){

        this.len = target.length;
        this.drags = [];
        this.drops = [];
        this.dragsP = [];

        for(var i = 0 ; i< this.len ; i++){
            var drag = $("#"+target[i]);

            this.drags.push(drag);
            drag.draggable();

            var p = drag.position();

            drag.dragIndex = i;
            console.log(drag);

            this.dragsP.push(p);

            drag.mousedown (function (e){
//                console.log('down', this);
                $(this).css('z-index','100');
            });

            drag.mouseup (function (e){


                console.log('mouseup',e);
                var tt = e.target;
                var xx = e.clientX;
                var yy = e.clientY;
                console.log(xx, yy);
                $(tt).css('z-index','99');
                this.onCheck(tt, xx, yy);

            }.bind(this));

            var drop = $("#"+answers[i]);
            this.drops.push(drop);
        }


    }
    TestDrag.prototype = {
        onDownDrag : function (val) {
            console.log(val);
        },

        onCheck : function (dom, xx, yy) {
            for(var i = 0 ; i< this.len ; i++){
                var flag = this.drops[i].hitTestPoint({"x":xx,"y":yy, "transparency":true});

                if(flag) {
                    this.onDrop($(dom), this.drops[i]);
                    return;
                    break;
                }
            }

            this.dragReturn($(dom));
        },

        onDrop : function (drag, drop){
            console.log("drag :: ", drag);
            console.log("drop :: ", drop);
            var p = drop.position();
            console.log(p);
            drag.css({top:p.top+'px' , left:p.left+'px'});
        },

        dragReturn : function (drag){
            console.log(drag);
//            console.log(this.drags[0]);
//            var index = drag.dragIndex;
//            console.log(index);
//            drag.css({top:this.dragsP[index].top+'px' , left:this.dragsP[index].left+'px'});
        }

    }

    var dd = new TestDrag(['aaaaaaaa', 'bbbbbbb'],['t1','t2'])
</script>

</body>
</html>